!function (a) { "function" == typeof define && define.amd ? define(["jquery", "datatables.net"], function (b) { return a(b, window, document) }) : "object" == typeof exports ? module.exports = function (b, c) { return b || (b = window), c && c.fn.dataTable || (c = require("datatables.net")(b, c).$), a(c, b, b.document) } : a(jQuery, window, document) }(function (a, b, c, d) { var e = a.fn.dataTable, f = 0, g = 0, h = e.ext.buttons, i = function (b, c) { !0 === c && (c = {}), a.isArray(c) && (c = { buttons: c }), this.c = a.extend(!0, {}, i.defaults, c), c.buttons && (this.c.buttons = c.buttons), this.s = { dt: new e.Api(b), buttons: [], listenKeys: "", namespace: "dtb" + f++ }, this.dom = { container: a("<" + this.c.dom.container.tag + "/>").addClass(this.c.dom.container.className) }, this._constructor() }; a.extend(i.prototype, { action: function (a, b) { var c = this._nodeToButton(a); return b === d ? c.conf.action : (c.conf.action = b, this) }, active: function (b, c) { var e = this._nodeToButton(b), f = this.c.dom.button.active, e = a(e.node); return c === d ? e.hasClass(f) : (e.toggleClass(f, c === d || c), this) }, add: function (a, b) { var c = this.s.buttons; if ("string" == typeof b) { for (var d = b.split("-"), c = this.s, e = 0, f = d.length - 1; f > e; e++) c = c.buttons[1 * d[e]]; c = c.buttons, b = 1 * d[d.length - 1] } return this._expandButton(c, a, !1, b), this._draw(), this }, container: function () { return this.dom.container }, disable: function (b) { return b = this._nodeToButton(b), a(b.node).addClass(this.c.dom.button.disabled), this }, destroy: function () { a("body").off("keyup." + this.s.namespace); var b, c, d = this.s.buttons.slice(); for (b = 0, c = d.length; c > b; b++) this.remove(d[b].node); for (this.dom.container.remove(), d = this.s.dt.settings()[0], b = 0, c = d.length; c > b; b++) if (d.inst === this) { d.splice(b, 1); break } return this }, enable: function (b, c) { if (!1 === c) return this.disable(b); var d = this._nodeToButton(b); return a(d.node).removeClass(this.c.dom.button.disabled), this }, name: function () { return this.c.name }, node: function (b) { return b = this._nodeToButton(b), a(b.node) }, remove: function (b) { var c = this._nodeToButton(b), d = this._nodeToHost(b), e = this.s.dt; if (c.buttons.length) for (var f = c.buttons.length - 1; f >= 0; f--) this.remove(c.buttons[f].node); return c.conf.destroy && c.conf.destroy.call(e.button(b), e, a(b), c.conf), this._removeKey(c.conf), a(c.node).remove(), b = a.inArray(c, d), d.splice(b, 1), this }, text: function (b, c) { var e = this._nodeToButton(b), f = this.c.dom.collection.buttonLiner, f = e.inCollection && f && f.tag ? f.tag : this.c.dom.buttonLiner.tag, g = this.s.dt, h = a(e.node), i = function (a) { return "function" == typeof a ? a(g, h, e.conf) : a }; return c === d ? i(e.conf.text) : (e.conf.text = c, f ? h.children(f).html(i(c)) : h.html(i(c)), this) }, _constructor: function () { var b = this, d = this.s.dt, e = d.settings()[0], f = this.c.buttons; e._buttons || (e._buttons = []), e._buttons.push({ inst: this, name: this.c.name }); for (var e = 0, g = f.length; g > e; e++) this.add(f[e]); d.on("destroy", function () { b.destroy() }), a("body").on("keyup." + this.s.namespace, function (a) { if (!c.activeElement || c.activeElement === c.body) { var d = String.fromCharCode(a.keyCode).toLowerCase(); -1 !== b.s.listenKeys.toLowerCase().indexOf(d) && b._keypress(d, a) } }) }, _addKey: function (b) { b.key && (this.s.listenKeys += a.isPlainObject(b.key) ? b.key.key : b.key) }, _draw: function (a, b) { a || (a = this.dom.container, b = this.s.buttons), a.children().detach(); for (var c = 0, d = b.length; d > c; c++) a.append(b[c].inserter), b[c].buttons && b[c].buttons.length && this._draw(b[c].collection, b[c].buttons) }, _expandButton: function (b, c, e, f) { for (var g = this.s.dt, h = 0, c = a.isArray(c) ? c : [c], i = 0, j = c.length; j > i; i++) { var k = this._resolveExtends(c[i]); if (k) if (a.isArray(k)) this._expandButton(b, k, e, f); else { var l = this._buildButton(k, e); if (l) { if (f !== d ? (b.splice(f, 0, l), f++) : b.push(l), l.conf.buttons) { var m = this.c.dom.collection; l.collection = a("<" + m.tag + "/>").addClass(m.className), l.conf._collection = l.collection, this._expandButton(l.buttons, l.conf.buttons, !0, f) } k.init && k.init.call(g.button(l.node), g, a(l.node), k), h++ } } } }, _buildButton: function (b, c) { var d = this.c.dom.button, e = this.c.dom.buttonLiner, f = this.c.dom.collection, h = this.s.dt, i = function (a) { return "function" == typeof a ? a(h, k, b) : a }; if (c && f.button && (d = f.button), c && f.buttonLiner && (e = f.buttonLiner), b.available && !b.available(h, b)) return !1; var j = function (b, c, d, e) { e.action.call(c.button(d), b, c, d, e), a(c.table().node()).triggerHandler("buttons-action.dt", [c.button(d), c, d, e]) }, k = a("<" + d.tag + "/>").addClass(d.className).attr("tabindex", this.s.dt.settings()[0].iTabIndex).attr("aria-controls", this.s.dt.table().node().id).on("click.dtb", function (a) { a.preventDefault(), !k.hasClass(d.disabled) && b.action && j(a, h, k, b), k.blur() }).on("keyup.dtb", function (a) { 13 === a.keyCode && !k.hasClass(d.disabled) && b.action && j(a, h, k, b) }); return "a" === d.tag.toLowerCase() && k.attr("href", "#"), e.tag ? (f = a("<" + e.tag + "/>").html(i(b.text)).addClass(e.className), "a" === e.tag.toLowerCase() && f.attr("href", "#"), k.append(f)) : k.html(i(b.text)), !1 === b.enabled && k.addClass(d.disabled), b.className && k.addClass(b.className), b.titleAttr && k.attr("title", b.titleAttr), b.namespace || (b.namespace = ".dt-button-" + g++), e = (e = this.c.dom.buttonContainer) && e.tag ? a("<" + e.tag + "/>").addClass(e.className).append(k) : k, this._addKey(b), { conf: b, node: k.get(0), inserter: e, buttons: [], inCollection: c, collection: null } }, _nodeToButton: function (a, b) { b || (b = this.s.buttons); for (var c = 0, d = b.length; d > c; c++) { if (b[c].node === a) return b[c]; if (b[c].buttons.length) { var e = this._nodeToButton(a, b[c].buttons); if (e) return e } } }, _nodeToHost: function (a, b) { b || (b = this.s.buttons); for (var c = 0, d = b.length; d > c; c++) { if (b[c].node === a) return b; if (b[c].buttons.length) { var e = this._nodeToHost(a, b[c].buttons); if (e) return e } } }, _keypress: function (b, c) { var d = function (e) { for (var f = 0, g = e.length; g > f; f++) { var h = e[f].conf, i = e[f].node; h.key && (h.key === b ? a(i).click() : !a.isPlainObject(h.key) || h.key.key !== b || h.key.shiftKey && !c.shiftKey || (!h.key.altKey || c.altKey) && (!h.key.ctrlKey || c.ctrlKey) && (!h.key.metaKey || c.metaKey) && a(i).click()), e[f].buttons.length && d(e[f].buttons) } }; d(this.s.buttons) }, _removeKey: function (b) { if (b.key) { var c = a.isPlainObject(b.key) ? b.key.key : b.key, b = this.s.listenKeys.split(""), c = a.inArray(c, b); b.splice(c, 1), this.s.listenKeys = b.join("") } }, _resolveExtends: function (b) { for (var c, e, f = this.s.dt, g = function (c) { for (var e = 0; !a.isPlainObject(c) && !a.isArray(c) ;) { if (c === d) return; if ("function" == typeof c) { if (c = c(f, b), !c) return !1 } else if ("string" == typeof c) { if (!h[c]) throw "Unknown button type: " + c; c = h[c] } if (e++, e > 30) throw "Buttons: Too many iterations" } return a.isArray(c) ? c : a.extend({}, c) }, b = g(b) ; b && b.extend;) { if (!h[b.extend]) throw "Cannot extend unknown button type: " + b.extend; var i = g(h[b.extend]); if (a.isArray(i)) return i; if (!i) return !1; c = i.className, b = a.extend({}, i, b), c && b.className !== c && (b.className = c + " " + b.className); var j = b.postfixButtons; if (j) { for (b.buttons || (b.buttons = []), c = 0, e = j.length; e > c; c++) b.buttons.push(j[c]); b.postfixButtons = null } if (j = b.prefixButtons) { for (b.buttons || (b.buttons = []), c = 0, e = j.length; e > c; c++) b.buttons.splice(c, 0, j[c]); b.prefixButtons = null } b.extend = i.extend } return b } }), i.background = function (b, c, e) { e === d && (e = 400), b ? a("<div/>").addClass(c).css("display", "none").appendTo("body").fadeIn(e) : a("body > div." + c).fadeOut(e, function () { a(this).removeClass(c).remove() }) }, i.instanceSelector = function (b, c) { if (!b) return a.map(c, function (a) { return a.inst }); var d = [], e = a.map(c, function (a) { return a.name }), f = function (b) { if (a.isArray(b)) for (var g = 0, h = b.length; h > g; g++) f(b[g]); else "string" == typeof b ? -1 !== b.indexOf(",") ? f(b.split(",")) : (b = a.inArray(a.trim(b), e), -1 !== b && d.push(c[b].inst)) : "number" == typeof b && d.push(c[b].inst) }; return f(b), d }, i.buttonSelector = function (b, c) { for (var e = [], f = function (a, b, c) { for (var e, g, h = 0, i = b.length; i > h; h++) (e = b[h]) && (g = c !== d ? c + h : h + "", a.push({ node: e.node, name: e.conf.name, idx: g }), e.buttons && f(a, e.buttons, g + "-")) }, g = function (b, c) { var h, i, j = []; if (f(j, c.s.buttons), h = a.map(j, function (a) { return a.node }), a.isArray(b) || b instanceof a) for (h = 0, i = b.length; i > h; h++) g(b[h], c); else if (null === b || b === d || "*" === b) for (h = 0, i = j.length; i > h; h++) e.push({ inst: c, node: j[h].node }); else if ("number" == typeof b) e.push({ inst: c, node: c.s.buttons[b].node }); else if ("string" == typeof b) if (-1 !== b.indexOf(",")) for (j = b.split(","), h = 0, i = j.length; i > h; h++) g(a.trim(j[h]), c); else if (b.match(/^\d+(\-\d+)*$/)) h = a.map(j, function (a) { return a.idx }), e.push({ inst: c, node: j[a.inArray(b, h)].node }); else if (-1 !== b.indexOf(":name")) { var k = b.replace(":name", ""); for (h = 0, i = j.length; i > h; h++) j[h].name === k && e.push({ inst: c, node: j[h].node }) } else a(h).filter(b).each(function () { e.push({ inst: c, node: this }) }); else "object" == typeof b && b.nodeName && (j = a.inArray(b, h), -1 !== j && e.push({ inst: c, node: h[j] })) }, h = 0, i = b.length; i > h; h++) g(c, b[h]); return e }, i.defaults = { buttons: ["copy", "excel", "csv", "pdf", "print"], name: "main", tabIndex: 0, dom: { container: { tag: "div", className: "dt-buttons" }, collection: { tag: "div", className: "dt-button-collection" }, button: { tag: "a", className: "dt-button", active: "active", disabled: "disabled" }, buttonLiner: { tag: "span", className: "" } } }, i.version = "1.2.2", a.extend(h, { collection: { text: function (a) { return a.i18n("buttons.collection", "Collection") }, className: "buttons-collection", action: function (c, d, e, f) { var c = e.offset(), g = a(d.table().container()), h = !1; a("div.dt-button-background").length && (h = a("div.dt-button-collection").offset(), a("body").trigger("click.dtb-collection")), f._collection.addClass(f.collectionLayout).css("display", "none").appendTo("body").fadeIn(f.fade); var j = f._collection.css("position"); h && "absolute" === j ? f._collection.css({ top: h.top + 5, left: h.left + 5 }) : "absolute" === j ? (f._collection.css({ top: c.top + e.outerHeight(), left: c.left }), e = c.left + f._collection.outerWidth(), g = g.offset().left + g.width(), e > g && f._collection.css("left", c.left - (e - g))) : (c = f._collection.height() / 2, c > a(b).height() / 2 && (c = a(b).height() / 2), f._collection.css("marginTop", -1 * c)), f.background && i.background(!0, f.backgroundClassName, f.fade), setTimeout(function () { a("div.dt-button-background").on("click.dtb-collection", function () { }), a("body").on("click.dtb-collection", function (b) { var c = a.fn.addBack ? "addBack" : "andSelf"; a(b.target).parents()[c]().filter(f._collection).length || (f._collection.fadeOut(f.fade, function () { f._collection.detach() }), a("div.dt-button-background").off("click.dtb-collection"), i.background(!1, f.backgroundClassName, f.fade), a("body").off("click.dtb-collection"), d.off("buttons-action.b-internal")) }) }, 10), f.autoClose && d.on("buttons-action.b-internal", function () { a("div.dt-button-background").click() }) }, background: !0, collectionLayout: "", backgroundClassName: "dt-button-background", autoClose: !1, fade: 400 }, copy: function (a, b) { return h.copyHtml5 ? "copyHtml5" : h.copyFlash && h.copyFlash.available(a, b) ? "copyFlash" : void 0 }, csv: function (a, b) { return h.csvHtml5 && h.csvHtml5.available(a, b) ? "csvHtml5" : h.csvFlash && h.csvFlash.available(a, b) ? "csvFlash" : void 0 }, excel: function (a, b) { return h.excelHtml5 && h.excelHtml5.available(a, b) ? "excelHtml5" : h.excelFlash && h.excelFlash.available(a, b) ? "excelFlash" : void 0 }, pdf: function (a, b) { return h.pdfHtml5 && h.pdfHtml5.available(a, b) ? "pdfHtml5" : h.pdfFlash && h.pdfFlash.available(a, b) ? "pdfFlash" : void 0 }, pageLength: function (b) { var b = b.settings()[0].aLengthMenu, c = a.isArray(b[0]) ? b[0] : b, d = a.isArray(b[0]) ? b[1] : b, e = function (a) { return a.i18n("buttons.pageLength", { "-1": "Show all rows", _: "Show %d rows" }, a.page.len()) }; return { extend: "collection", text: e, className: "buttons-page-length", autoClose: !0, buttons: a.map(c, function (a, b) { return { text: d[b], action: function (b, c) { c.page.len(a).draw() }, init: function (b, c, d) { var e = this, c = function () { e.active(b.page.len() === a) }; b.on("length.dt" + d.namespace, c), c() }, destroy: function (a, b, c) { a.off("length.dt" + c.namespace) } } }), init: function (a, b, c) { var d = this; a.on("length.dt" + c.namespace, function () { d.text(e(a)) }) }, destroy: function (a, b, c) { a.off("length.dt" + c.namespace) } } } }), e.Api.register("buttons()", function (a, b) { b === d && (b = a, a = d), this.selector.buttonGroup = a; var c = this.iterator(!0, "table", function (c) { return c._buttons ? i.buttonSelector(i.instanceSelector(a, c._buttons), b) : void 0 }, !0); return c._groupSelector = a, c }), e.Api.register("button()", function (a, b) { var c = this.buttons(a, b); return 1 < c.length && c.splice(1, c.length), c }), e.Api.registerPlural("buttons().active()", "button().active()", function (a) { return a === d ? this.map(function (a) { return a.inst.active(a.node) }) : this.each(function (b) { b.inst.active(b.node, a) }) }), e.Api.registerPlural("buttons().action()", "button().action()", function (a) { return a === d ? this.map(function (a) { return a.inst.action(a.node) }) : this.each(function (b) { b.inst.action(b.node, a) }) }), e.Api.register(["buttons().enable()", "button().enable()"], function (a) { return this.each(function (b) { b.inst.enable(b.node, a) }) }), e.Api.register(["buttons().disable()", "button().disable()"], function () { return this.each(function (a) { a.inst.disable(a.node) }) }), e.Api.registerPlural("buttons().nodes()", "button().node()", function () { var b = a(); return a(this.each(function (a) { b = b.add(a.inst.node(a.node)) })), b }), e.Api.registerPlural("buttons().text()", "button().text()", function (a) { return a === d ? this.map(function (a) { return a.inst.text(a.node) }) : this.each(function (b) { b.inst.text(b.node, a) }) }), e.Api.registerPlural("buttons().trigger()", "button().trigger()", function () { return this.each(function (a) { a.inst.node(a.node).trigger("click") }) }), e.Api.registerPlural("buttons().containers()", "buttons().container()", function () { var b = a(), c = this._groupSelector; return this.iterator(!0, "table", function (a) { if (a._buttons) for (var a = i.instanceSelector(c, a._buttons), d = 0, e = a.length; e > d; d++) b = b.add(a[d].container()) }), b }), e.Api.register("button().add()", function (a, b) { var c = this.context; return c.length && (c = i.instanceSelector(this._groupSelector, c[0]._buttons), c.length && c[0].add(b, a)), this.button(this._groupSelector, a) }), e.Api.register("buttons().destroy()", function () { return this.pluck("inst").unique().each(function (a) { a.destroy() }), this }), e.Api.registerPlural("buttons().remove()", "buttons().remove()", function () { return this.each(function (a) { a.inst.remove(a.node) }), this }); var j; e.Api.register("buttons.info()", function (b, c, e) { var f = this; return !1 === b ? (a("#datatables_buttons_info").fadeOut(function () { a(this).remove() }), clearTimeout(j), j = null, this) : (j && clearTimeout(j), a("#datatables_buttons_info").length && a("#datatables_buttons_info").remove(), a('<div id="datatables_buttons_info" class="dt-button-info"/>').html(b ? "<h2>" + b + "</h2>" : "").append(a("<div/>")["string" == typeof c ? "html" : "append"](c)).css("display", "none").appendTo("body").fadeIn(), e !== d && 0 !== e && (j = setTimeout(function () { f.buttons.info(!1) }, e)), this) }), e.Api.register("buttons.exportData()", function (b) { if (this.context.length) { for (var c = new e.Api(this.context[0]), d = a.extend(!0, {}, { rows: null, columns: "", modifier: { search: "applied", order: "applied" }, orthogonal: "display", stripHtml: !0, stripNewlines: !0, decodeEntities: !0, trim: !0, format: { header: function (a) { return f(a) }, footer: function (a) { return f(a) }, body: function (a) { return f(a) } } }, b), f = function (a) { return "string" != typeof a ? a : (d.stripHtml && (a = a.replace(/<[^>]*>/g, "")), d.trim && (a = a.replace(/^\s+|\s+$/g, "")), d.stripNewlines && (a = a.replace(/\n/g, " ")), d.decodeEntities && (k.innerHTML = a, a = k.value), a) }, b = c.columns(d.columns).indexes().map(function (a) { var b = c.column(a).header(); return d.format.header(b.innerHTML, a, b) }).toArray(), g = c.table().footer() ? c.columns(d.columns).indexes().map(function (a) { var b = c.column(a).footer(); return d.format.footer(b ? b.innerHTML : "", a, b) }).toArray() : null, h = c.rows(d.rows, d.modifier).indexes().toArray(), i = c.cells(h, d.columns).render(d.orthogonal).toArray(), h = c.cells(h, d.columns).nodes().toArray(), j = b.length, l = j > 0 ? i.length / j : 0, m = Array(l), n = 0, o = 0; l > o; o++) { for (var p = Array(j), q = 0; j > q; q++) p[q] = d.format.body(i[n], o, q, h[n]), n++; m[o] = p } return { header: b, footer: g, body: m } } }); var k = a("<textarea/>")[0]; return a.fn.dataTable.Buttons = i, a.fn.DataTable.Buttons = i, a(c).on("init.dt plugin-init.dt", function (a, b) { if ("dt" === a.namespace) { var c = b.oInit.buttons || e.defaults.buttons; c && !b._buttons && new i(b, c).container() } }), e.ext.feature.push({ fnInit: function (a) { var a = new e.Api(a), b = a.init().buttons || e.defaults.buttons; return new i(a, b).container() }, cFeature: "B" }), i });